<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>3-30 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="类型转换const_cast&lt;&gt;去掉（指针或引用）常量属性，里面必须时指针或引用类型，但通过指针也无法更改常量的值 static_cast&lt;&gt;提供编译器认为安全的类型转换转换有效：转换无效：  reinterpret_cast&lt;&gt;类似c风格的强制类型转换， 不安全转换有效 dynamic_cast&lt;&gt;用于继承结构中，可以支持RTTI类型识别的上下转换">
<meta property="og:type" content="article">
<meta property="og:title" content="3-30">
<meta property="og:url" content="http://example.com/2024/03/30/3-30-1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="类型转换const_cast&lt;&gt;去掉（指针或引用）常量属性，里面必须时指针或引用类型，但通过指针也无法更改常量的值 static_cast&lt;&gt;提供编译器认为安全的类型转换转换有效：转换无效：  reinterpret_cast&lt;&gt;类似c风格的强制类型转换， 不安全转换有效 dynamic_cast&lt;&gt;用于继承结构中，可以支持RTTI类型识别的上下转换">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2024/03/30/3-30-1/image-1.png">
<meta property="og:image" content="http://example.com/2024/03/30/3-30-1/image-2.png">
<meta property="og:image" content="http://example.com/2024/03/30/3-30-1/image-3.png">
<meta property="og:image" content="http://example.com/2024/03/30/3-30-1/image-4.png">
<meta property="og:image" content="http://example.com/2024/03/30/3-30-1/image-5.png">
<meta property="og:image" content="http://example.com/2024/03/30/3-30-1/image-6.png">
<meta property="article:published_time" content="2024-03-30T05:59:35.000Z">
<meta property="article:modified_time" content="2024-03-30T12:00:05.223Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2024/03/30/3-30-1/image-1.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-3-30-1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/30/3-30-1/" class="article-date">
  <time class="dt-published" datetime="2024-03-30T05:59:35.000Z" itemprop="datePublished">2024-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      3-30
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h1><h1 id="const-cast"><a href="#const-cast" class="headerlink" title="const_cast&lt;&gt;"></a>const_cast&lt;&gt;</h1><p>去掉（指针或引用）常量属性，里面必须时指针或引用类型，但通过指针也无法更改常量的值<br><img src="/2024/03/30/3-30-1/image-1.png" alt="alt text"></p>
<h1 id="static-cast"><a href="#static-cast" class="headerlink" title="static_cast&lt;&gt;"></a>static_cast&lt;&gt;</h1><p>提供编译器认为安全的类型转换<br>转换有效：<img src="/2024/03/30/3-30-1/image-2.png" alt="alt text"><br>转换无效：<img src="/2024/03/30/3-30-1/image-3.png" alt="alt text"> </p>
<h1 id="reinterpret-cast"><a href="#reinterpret-cast" class="headerlink" title="reinterpret_cast&lt;&gt;"></a>reinterpret_cast&lt;&gt;</h1><p>类似c风格的强制类型转换， 不安全<br><img src="/2024/03/30/3-30-1/image-4.png" alt="alt text">转换有效</p>
<h1 id="dynamic-cast"><a href="#dynamic-cast" class="headerlink" title="dynamic_cast&lt;&gt;"></a>dynamic_cast&lt;&gt;</h1><p>用于继承结构中，可以支持RTTI类型识别的上下转换<br><img src="/2024/03/30/3-30-1/image-5.png" alt="alt text"><br><img src="/2024/03/30/3-30-1/image-6.png" alt="alt text"></p>
<h1 id="C-多线程编程"><a href="#C-多线程编程" class="headerlink" title="C++多线程编程"></a>C++多线程编程</h1><h2 id="相关库："><a href="#相关库：" class="headerlink" title="相关库："></a>相关库：</h2><pre><code>#include &lt;thread&gt;
#include &lt;mutex&gt; //互斥锁
#include &lt;condition_variable&gt;
</code></pre>
<h2 id="相关函数实现"><a href="#相关函数实现" class="headerlink" title="相关函数实现"></a>相关函数实现</h2><h3 id="线程："><a href="#线程：" class="headerlink" title="线程："></a>线程：</h3><pre><code>创建线程： thread t(func, a, b, ...); // 创建一个线程对象， func为线程函数， a， b...为函数参数
t.join() //主线程要等待子线程t运行结束
若主线程运行结束后，还留有未运行完成的子线程会报错
可以用： t.detch() //把子线程t设置为和主线程分离的线程， 这样就不会报错
std::this_thread命名空间， 里面封装了许多函数
如：get_id() //获取线程id
    sleep() // 睡眠
    sleep_for() //睡多长时间
    sleep_until() //睡到什么时候
std::chrono命名空间， 封装了一些时间相关的函数
</code></pre>
<h3 id="锁："><a href="#锁：" class="headerlink" title="锁："></a>锁：</h3><pre><code>std::mutex mtx;//定义一把锁
mtx.lock() , mtx.unlock() //加锁解锁
但由于加锁后若直接return了可能unlock调用不到无法解锁， 造成死锁

解决：
std::mutex mtx;
std::lock_guard&lt;std::mutex&gt; lck(mtx);
使用lock_guard封装了一把锁，出了&#123;&#125;(作用域)后会自动析构，无需担心死锁问题，也不用手动加锁解锁,禁止了拷贝构造和拷贝复制，**所以不能用于函数参数或者返回值**

std::mutex mtx;
std::unique_lock&lt;std::mutex&gt; lck(mtx);
使用unique_lock封装了一把锁，出了&#123;&#125;(作用域)后会自动析构，无需担心死锁问题，也不用手动加锁解锁
禁止了拷贝构造和拷贝复制，**可以使用移动构造和移动复制**，类似于unique_ptr
二者都运用了智能指针的思想
</code></pre>
<h3 id="线程通信："><a href="#线程通信：" class="headerlink" title="线程通信："></a>线程通信：</h3><h4 id="条件变量：condition-variable"><a href="#条件变量：condition-variable" class="headerlink" title="条件变量：condition_variable"></a>条件变量：condition_variable</h4><pre><code>常与一把互斥锁一起使用
定义： condition_variable cv;
cv.wait(lck); // lck 只能是unique_lock&lt;std::mutex&gt;类型
作用：首先线程的状态变为等待状态， 第二步释放所拿到的锁
cv.notify_all() / cv.notify_one()
作用：唤醒其他的所有/一个线程，被唤醒的线程由等待变为*阻塞*状态，只有拿到锁后才变成就绪态
</code></pre>
<h4 id="信号量："><a href="#信号量：" class="headerlink" title="信号量："></a>信号量：</h4><pre><code>表示资源数量？
P操作：资源数+1
V操作：资源数-1
二元信号量时作用跟互斥锁是类似的，但信号量所有线程都可以操作，但互斥锁只能由持有它的线程释放这把锁
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/03/30/3-30-1/" data-id="clue1lu5a0002nkw4h3rxgcoc" data-title="3-30" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2024/03/26/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">实验报告</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/03/30/3-30-1/">3-30</a>
          </li>
        
          <li>
            <a href="/2024/03/26/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/">实验报告</a>
          </li>
        
          <li>
            <a href="/2024/03/25/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>